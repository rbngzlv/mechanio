:javascript
  $(function() {
    var container = $('.calendar-container#mechanic_#{mechanic.id}'),
        calendar = container.find('.calendar'),
        form = container.find('form');

    calendar.fullCalendar({
      header: {
        left: 'title',
        center: '',
        right: 'prev,next,today'
      },
      defaultView: 'agendaWeek',
      firstDay: #{ Date.today.wday },
      firstHour: 9,
      minTime: 9,
      maxTime: 19,
      slotMinutes: 120,
      allDayDefault: false,
      allDaySlot: false,
      timeFormat: { agenda: '' },
      selectable: true,
      events: #{ EventsManager.new(mechanic).events_list.to_json(only: [:start, :end]) },
      eventClick: function(event) {
        return false;
      },
      dayClick: function(date, allDay, jsEvent, view) {
        form.find('#job_scheduled_at').val(moment(date).format('YYYY-MM-DDTHH:mm'));
        form.find('input[type=submit]').attr('disabled', false);
      }
    });
  });
.panel.panel-default.panel-rounded
  .panel-body
    .row
      .profile-border.clickable{ data: { toggle: 'modal', target: "#js-mechanic-#{mechanic.id}" }, role: 'button' }
        = render "shared/mechanic/avatar", mechanic: mechanic
        %h5.text-center
          = mechanic.full_name
          - if mechanic.years_as_a_mechanic
            %br #{ mechanic.years_as_a_mechanic } years of experience

      .row.calendar-container[mechanic]
        %legend Select Arrival Time
        .calendar.week-view
        = simple_form_for @job, url: users_appointment_path, html: { class: 'choose_mechanic_form' }, wrapper: :nolabel do |f|
          = f.hidden_field :scheduled_at, value: nil
          = f.hidden_field :mechanic_id, value: mechanic.id
          = f.submit 'Book Appointment', class: 'btn btn-info', disabled: true
    .modal.fade{id: "js-mechanic-#{mechanic.id}", "aria-hidden" => "true", "aria-labelledby" => "myModalLabel1", role: "dialog", tabindex: "-1"}
      .review-block.container
        .modal-header.clearfix
          %h5.pull-left
            %i.icon-user
            = mechanic.full_name
          %span.tools.pull-right
            %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", type: "button"}
              %i.glyphicon.glyphicon.glyphicon-remove
        .panel-body.modal-body
          .row
            .profile-border
              = image_tag mechanic.avatar? ? mechanic.avatar_url(:thumb) : 'photo.jpg', class: 'avatar js-update-avatar'
              .reviews-row.clearfix
                .rating.pull-left
                  = rating_stars(mechanic.rating)
                %span.review-text.pull-right
                  = pluralize(mechanic.reviews, 'Review')
              - if mechanic.years_as_a_mechanic
                %br
                .text-center.experience #{ mechanic.years_as_a_mechanic } years of experience
            %div
              - unless mechanic.description.blank?
                .panel.nested-panel
                  = mechanic.description
              .col-md-6.pull-right
                = render "shared/mechanic/verified_icons", account: mechanic
          .row
            = render 'shared/comments', title: "Customer Reviews", comments: mechanic.comments
