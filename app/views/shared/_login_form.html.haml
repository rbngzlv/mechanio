#login-modal.modal.fade
  .modal-dialog
    .modal-content
      .modal-header
        %button{ type: 'button', class: 'close', 'data-dismiss' => 'modal', 'aria-hidden' => true } &times;
        %h4.modal-title Login
      .modal-body
        %p.text-center= link_to image_tag('facebook-btn.jpg'), user_omniauth_authorize_path(:facebook), class: 'facebook-link'
        %p.text-center= link_to image_tag('gmail-btn.jpg'), user_omniauth_authorize_path(:google_oauth2), class: 'gmail-link'
        %p.text-center.login-type-separator or
        = simple_form_for(resource, as: resource_name, url: session_path(resource_name), format: :json, defaults: { required: false, label: false }) do |f|
          .row
            .col-md-8.col-md-offset-2
              = f.input :email, placeholder: 'Email', autofocus: true
              = f.input :password, placeholder: 'Password'
              = f.input :remember_me, as: :boolean, inline_label: true if devise_mapping.rememberable?
          .row.text-center
            .col-md-4.col-md-offset-4
              = f.button :submit, 'Login', class: 'btn-block btn-success'
      .modal-footer
        %p.pull-left
          Forgot your password?
          = link_to 'Reset it here', new_password_path(resource_name)
        %p.pull-right
          It's free to join!
          = link_to 'Sign up', '', class: 'js-modal', 'data-toggle' => '#register-modal'
#social-login-modal.modal.fade
  .modal-dialog
    .modal-content
      .modal-header
        %button{ type: 'button', class: 'close', 'data-dismiss' => 'modal', 'aria-hidden' => true } &times;
        %h4.modal-title Sign Up
      .modal-body
        %p.text-center= link_to image_tag('facebook-btn.jpg'), user_omniauth_authorize_path(:facebook), class: 'facebook-link'
        %p.text-center= link_to image_tag('gmail-btn.jpg'), user_omniauth_authorize_path(:google_oauth2), class: 'gmail-link'
        %p
          Sign up with Mechanio to book reliable mobile mechanics to service your car from your home or office.
        %p.text-center
          %span.small We never post without permission (we hate that tool)
          %br
          = link_to 'Use regular email sign up', '', class: 'js-modal', 'data-toggle' => '#register-modal'
      .modal-footer
        %p.pull-right
          Already have an account?
          = link_to 'Log in', '', class: 'js-modal', 'data-toggle' => '#login-modal'
- if devise_mapping.registerable?
  #register-modal.modal.fade
    .modal-dialog
      .modal-content
        .modal-header
          %button{ type: 'button', class: 'close', 'data-dismiss' => 'modal', 'aria-hidden' => true } &times;
          %h4.modal-title Sign up
        .modal-body
          = simple_form_for(resource, as: resource_name, url: registration_path(resource_name), format: :json, defaults: { required: false, label: false, input_html: { autocomplete: 'off' }}) do |f|
            .row
              .col-md-8.col-md-offset-2
                = f.input :first_name, placeholder: 'First name', autofocus: true, wrapper_html: { class: 'col-md-6 first-name' }
                = f.input :last_name, placeholder: 'Last name', wrapper_html: { class: 'col-md-6 last-name' }
                = f.input :email, placeholder: 'Email'
                = f.input :password, placeholder: 'Password (Minimum 8 Characters)'
            .row.text-center
              .col-md-4.col-md-offset-4
                = f.button :submit, 'Sign up', class: 'btn-block btn-success'
          %p.text-center.top-margin
            = link_to 'Signing up with a social network is easier', '', class: 'js-modal', 'data-toggle' => '#social-login-modal'
        .modal-footer
          %p.pull-left
            Forgot your password?
            = link_to 'Reset it here', new_password_path(resource_name)
          %p.pull-right
            Already have an account?
            = link_to 'Login', '', class: 'js-modal', 'data-toggle' => '#login-modal'
:coffee
  $('.js-modal').click (e) ->
    e.preventDefault()
    $el = $(e.target)
    $el.parents('.modal').modal('toggle')
    $($el.attr('data-toggle')).modal('toggle')
