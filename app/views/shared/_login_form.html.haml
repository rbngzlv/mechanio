#login-modal.modal.fade
  .modal-dialog
    .modal-content
      .modal-header
        %button{ type: 'button', class: 'close', 'data-dismiss' => 'modal', 'aria-hidden' => true } &times;
        %h4.modal-title Login
      .modal-body
        = simple_form_for(resource, as: resource_name, url: session_path(resource_name), format: :json, defaults: { required: false, label: false }) do |f|
          .row
            .col-md-8.col-md-offset-2
              = f.input :email, placeholder: 'Email', autofocus: true
              = f.input :password, placeholder: 'Password'
              = f.input :remember_me, as: :boolean, inline_label: true if devise_mapping.rememberable?
          .row.text-center
            .col-md-4.col-md-offset-4
              = f.button :submit, 'Login', class: 'btn-block btn-success'
      .modal-footer
        %p
          = link_to 'Social connections', '', class: 'js-socials-link'
        %p.pull-left
          Forgot your password?
          = link_to 'Reset it here', new_password_path(resource_name)
        %p.pull-right
          It's free to join!
          = link_to 'Sign up', '', class: 'js-signup-link'
#social-login-modal.modal.fade
  .modal-dialog
    .modal-content
      .modal-header
        %button{ type: 'button', class: 'close', 'data-dismiss' => 'modal', 'aria-hidden' => true } &times;
        %h4.modal-title Sign Up
      .modal-body
        %p= link_to 'Sign up through Facebook', '/auth/facebook'
        %p
          Sign up with Mechanio
          = link_to 'regular sign up', '', class: 'js-signup-link'
      .modal-footer
        %p.pull-right
          It's free to join!
          = link_to 'Log in', '', class: 'js-login-link'
- #TODO: спросить у бори: "что это за условие?""
- if devise_mapping.registerable?
  #register-modal.modal.fade
    .modal-dialog
      .modal-content
        .modal-header
          %button{ type: 'button', class: 'close', 'data-dismiss' => 'modal', 'aria-hidden' => true } &times;
          %h4.modal-title Sign up
        .modal-body
          = simple_form_for(resource, as: resource_name, url: registration_path(resource_name), format: :json, defaults: { required: false, label: false, input_html: { autocomplete: 'off' }}) do |f|
            .row
              .col-md-8.col-md-offset-2
                = f.input :first_name, placeholder: 'First name', autofocus: true
                = f.input :last_name, placeholder: 'Last name'
                = f.input :email, placeholder: 'Email'
                = f.input :password, placeholder: 'Password'
            .row.text-center
              .col-md-4.col-md-offset-4
                = f.button :submit, 'Sign up', class: 'btn-block btn-success'
        .modal-footer
          %p
            = link_to 'Social connections', '', class: 'js-socials-link'
          %p.pull-left
            Forgot your password?
            = link_to 'Reset it here', new_password_path(resource_name)
          %p.pull-right
            Already have an account?
            = link_to 'Login', '', class: 'js-login-link'
:coffee
  $('.js-signup-link').click (e) ->
    e.preventDefault()
    $(e.target).parents('.modal').modal('toggle')
    $('#register-modal').modal('toggle')
  $('.js-login-link').click (e) ->
    e.preventDefault()
    $(e.target).parents('.modal').modal('toggle')
    $('#login-modal').modal('toggle')
  $('.js-socials-link').click (e) ->
    e.preventDefault()
    $(e.target).parents('.modal').modal('toggle')
    $('#social-login-modal').modal('toggle')
