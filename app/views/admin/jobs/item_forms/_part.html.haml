%div.form-inline.part-form{ 'ng-show' => "adding_part_#{task.id}", 'ng-form' => "form_part_#{task.id}" }
  = t.simple_fields_for :task_items, TaskItem.new do |i|
    = i.label 'Part'
    = i.hidden_field :itemable_type, value: 'Part'
    = i.simple_fields_for :itemable, Part.new, defaults: { label: false } do |a|
      = a.input :name, placeholder: 'Part name', input_html: { required: true, 'ng-model' => 'name' }
      = a.input :quantity, placeholder: 'Quantity', input_html: { required: true, min: 1, 'ng-model' => 'quantity' }
      = a.input :unit_cost, placeholder: 'Cost', input_html: { required: true, min: 0.1, 'ng-model' => 'unit_cost' }
    = i.submit 'Add', class: 'btn btn-primary btn-sm', 'ng-disabled' => "!form_part_#{task.id}.$valid"
    %a.btn.btn-danger.btn-sm{ href: '', 'ng-click' => "adding_part_#{task.id} = false" } Cancel
