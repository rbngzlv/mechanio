:javascript
  $(function() {
    var $flash = $('.js-flash-notice'),
        show_flash_notice = function(class_name, message) {
          class_name = class_name ? class_name :"success";
          message = message ? message : "Event succesfully deleted."
          $flash.before('<div class="alert alert-' + class_name + '">' + message + '</div>');
        };
    var $calendar = $('#calendar');
    var date = new Date(),
        d = date.getDate(),
        m = date.getMonth(),
        y = date.getFullYear();

    $calendar.fullCalendar({
      header: {
        left: 'title',
        center: '',
        right: 'prev,next,today'
      },
      events: #{ events.to_json },
      eventClick: function(event) {
        if(confirm("Are you sure you want to delete this record?")) {
          $.ajax({
            url: event.url,
            type: "POST",
            data: { _method:'DELETE' },
            statusCode: {
              200: function() {
                show_flash_notice();
                $calendar.fullCalendar( 'removeEvents', event.id );
              },
              406: function() {
                show_flash_notice('danger', 'Cannot delete event with job');
              }
            }
          });
        }
        return false;
      },
      dayClick: function(date, allDay, jsEvent, view) {
        $('.fc-state-highlight').removeClass('fc-state-highlight');
        $('#event_date_start').val(date);
        $(this).addClass('fc-state-highlight');
      }
    });
  });
.row.js-flash-notice
  .col-md-12
    = link_to 'Back', edit_mechanics_profile_path, class: 'btn btn-info pull-right col-md-2 bottom-margin'
.row
  .col-md-12
    .panel.panel-default.panel-rounded
      .panel-heading.clearfix
        %h4.panel-title
          Availabilities
      .panel-body.modal-body
        .row
          %h1 Calendar
          #calendar
        .row
          %h5.hx-default my days off
          = simple_form_for :event do |f|
            %label Make me unavailable on:
            = f.input :time_slots, collection: [['9 AM', 9], ['11 AM', 11], ['1 PM', 13], ['3 PM', 15], ['5 PM', 17], ['All', 'All']], as: :check_boxes, label: false, item_wrapper_class: 'checkbox-inline'
            = f.input :recurrence, collection: ['Does not recur', 'Daily', 'Weekly', 'Monthly'], selected: 'Does not recur', wrapper_html: { class: 'col-md-3' }
            = f.hidden_field :date_start, value: Date.today
            = f.submit 'Set', class: 'btn btn-success'
